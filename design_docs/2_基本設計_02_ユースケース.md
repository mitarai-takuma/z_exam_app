# ユースケース
ユーザーが利用する機能

## ユースケース一覧
| 機能パッケージ | 主画面 | ユースケース名 | 概要 |
| --- | --- | --- | --- |
| テスト問題管理パッケージ | メイン画面 | UC-001: テスト問題一覧表示 | インポートされたテスト問題を階層的に一覧表示する |
| テスト問題管理パッケージ | メイン画面 | UC-002: テスト問題検索 | キーワードによるテスト問題の検索とフィルタリング |
| テスト問題編集パッケージ | メイン画面 | UC-003: テスト問題詳細表示 | 選択されたテスト問題の詳細情報を表示する |
| テスト問題編集パッケージ | メイン画面 | UC-004: テスト問題編集 | テスト問題の内容を編集する |
| テスト問題編集パッケージ | メイン画面 | UC-005: LaTeXプレビュー表示 | LaTeX数式を含む問題文と選択肢をリアルタイムでプレビュー表示する |
| インポート/エクスポートパッケージ | CSVインポートダイアログ | UC-006: CSVインポート | CSVファイルからテスト問題をインポートする |
| インポート/エクスポートパッケージ | CSVエクスポートダイアログ | UC-007: CSVエクスポート | テスト問題をCSVファイルにエクスポートする |

## ユースケース詳細
### ■テスト問題管理パッケージ - UC-001: テスト問題一覧表示
インポートされたテスト問題を階層的に一覧表示する

#### 機能要件
テスト問題一覧表示機能

#### ユーザー
教員

#### シナリオ
##### 基本シナリオ  
1. ユーザーがアプリケーションを起動する  
2. システムはデータベースからテスト問題を読み込み、メイン画面の左ペインに一覧表示する  
3. システムは回とセクションで階層的にテスト問題をグループ化して表示する  
4. ユーザーは一覧から任意のテスト問題を選択する  
5. システムは選択されたテスト問題の詳細を右ペインに表示する  
  
##### 代替シナリオ（テスト問題が存在しない場合）  
1. ユーザーがアプリケーションを起動する  
2. システムはデータベースにテスト問題が存在しないことを確認する  
3. システムは左ペインに「テスト問題がありません」というメッセージを表示する  
4. システムは右ペインを無効化する

---

### ■テスト問題管理パッケージ - UC-002: テスト問題検索
キーワードによるテスト問題の検索とフィルタリング

#### 機能要件
テキストフィルター機能

#### ユーザー
教員

#### シナリオ
##### 基本シナリオ  
1. ユーザーがメイン画面の検索フィルターにキーワードを入力する  
2. システムはキーワードに基づいてテスト問題をリアルタイムでフィルタリングする  
3. システムはフィルタリング結果を左ペインに表示する  
4. ユーザーはフィルタリングされた一覧から任意のテスト問題を選択する  
5. システムは選択されたテスト問題の詳細を右ペインに表示する  
  
##### 代替シナリオ（検索結果が0件の場合）  
1. ユーザーがメイン画面の検索フィルターにキーワードを入力する  
2. システムはキーワードに基づいてテスト問題を検索するが、該当するテスト問題が見つからない  
3. システムは左ペインに「検索結果がありません」というメッセージを表示する  
4. システムは右ペインを現在の状態のまま維持する

---

### ■テスト問題編集パッケージ - UC-003: テスト問題詳細表示
選択されたテスト問題の詳細情報を表示する

#### 機能要件
テスト問題詳細表示機能

#### ユーザー
教員

#### シナリオ
##### 基本シナリオ  
1. ユーザーがテスト問題一覧から特定のテスト問題を選択する  
2. システムは選択されたテスト問題の全項目をメイン画面の右ペインに表示する  
3. システムはLaTeX数式を含む問題文と選択肢をプレビュータブでレンダリングして表示する  
  
##### 代替シナリオ（LaTeX構文エラーがある場合）  
1. ユーザーがテスト問題一覧から特定のテスト問題を選択する  
2. システムは選択されたテスト問題の全項目をメイン画面の右ペインに表示する  
3. システムはLaTeX数式の構文エラーを検出する  
4. システムはプレビュータブにエラーメッセージを表示し、エラー箇所を強調表示する

---

### ■テスト問題編集パッケージ - UC-004: テスト問題編集
テスト問題の内容を編集する

#### 機能要件
テスト問題編集機能

#### ユーザー
教員

#### シナリオ
##### 基本シナリオ  
1. ユーザーがメイン画面の右ペインでテスト問題の項目を編集する  
2. システムは編集内容をリアルタイムで検証する  
3. ユーザーが保存ボタンをクリックする  
4. システムは編集内容をデータベースに保存する  
5. システムは保存完了メッセージを表示する  
6. システムはテスト問題一覧を更新する  
  
##### 代替シナリオ（必須項目が未入力の場合）  
1. ユーザーがメイン画面の右ペインでテスト問題の項目を編集する  
2. ユーザーが必須項目を空にして保存ボタンをクリックする  
3. システムは必須項目が未入力であることを警告する  
4. システムは未入力の必須項目を強調表示する  
5. システムは保存処理を中断する

---

### ■テスト問題編集パッケージ - UC-005: LaTeXプレビュー表示
LaTeX数式を含む問題文と選択肢をリアルタイムでプレビュー表示する

#### 機能要件
LaTeXプレビュー機能

#### ユーザー
教員

#### シナリオ
##### 基本シナリオ  
1. ユーザーがメイン画面の右ペインで問題文または選択肢を編集する  
2. システムは編集内容に含まれるLaTeX数式を検出する  
3. システムはLaTeX数式をレンダリングしてプレビュータブにリアルタイムで表示する  
4. ユーザーはプレビュータブを選択して編集内容の表示確認を行う  
  
##### 代替シナリオ（LaTeX構文エラーがある場合）  
1. ユーザーがメイン画面の右ペインで問題文または選択肢を編集する  
2. システムは編集内容に含まれるLaTeX数式の構文エラーを検出する  
3. システムはプレビュータブにエラーメッセージを表示し、エラー箇所を強調表示する  
4. ユーザーはエラーメッセージを参照して構文を修正する

---

### ■インポート/エクスポートパッケージ - UC-006: CSVインポート
CSVファイルからテスト問題をインポートする

#### 機能要件
CSVインポート機能

#### ユーザー
教員

#### シナリオ
##### 基本シナリオ  
1. ユーザーがメイン画面のインポートボタンをクリックする  
2. システムはCSVインポートダイアログを表示する  
3. ユーザーがファイル選択ボタンをクリックしてCSVファイルを選択する  
4. ユーザーがエンコーディングを選択する  
5. ユーザーがインポートボタンをクリックする  
6. システムはCSVファイルを解析してテスト問題データを取り込む  
7. システムはインポート完了メッセージを表示する  
8. システムはテスト問題一覧を更新する  
  
##### 代替シナリオ（CSVフォーマットエラーの場合）  
1. ユーザーがメイン画面のインポートボタンをクリックする  
2. システムはCSVインポートダイアログを表示する  
3. ユーザーがファイル選択ボタンをクリックしてCSVファイルを選択する  
4. ユーザーがエンコーディングを選択する  
5. ユーザーがインポートボタンをクリックする  
6. システムはCSVファイルのフォーマットエラーを検出する  
7. システムはエラー内容を詳細に表示する  
8. システムはインポート処理を中断する

---

### ■インポート/エクスポートパッケージ - UC-007: CSVエクスポート
テスト問題をCSVファイルにエクスポートする

#### 機能要件
CSVエクスポート機能

#### ユーザー
教員

#### シナリオ
##### 基本シナリオ  
1. ユーザーがメイン画面のエクスポートボタンをクリックする  
2. システムはCSVエクスポートダイアログを表示する  
3. ユーザーが保存先を選択する  
4. ユーザーがエンコーディングを選択する  
5. ユーザーがエクスポート範囲（全件/選択中/フィルタ結果）を選択する  
6. ユーザーがエクスポートボタンをクリックする  
7. システムはテスト問題データをCSV形式で出力する  
8. システムはエクスポート完了メッセージを表示する  
  
##### 代替シナリオ（保存先に書き込み権限がない場合）  
1. ユーザーがメイン画面のエクスポートボタンをクリックする  
2. システムはCSVエクスポートダイアログを表示する  
3. ユーザーが保存先を選択する  
4. ユーザーがエンコーディングを選択する  
5. ユーザーがエクスポート範囲を選択する  
6. ユーザーがエクスポートボタンをクリックする  
7. システムは保存先への書き込み権限がないことを検出する  
8. システムは権限エラーメッセージを表示する  
9. システムはエクスポート処理を中断する

---
(c) 株式会社電通総研