"use strict";const n=require("electron"),l=require("node:fs/promises"),r=require("node:path"),c=require("node:url");var o=typeof document<"u"?document.currentScript:null;const d=r.dirname(c.fileURLToPath(typeof document>"u"?require("url").pathToFileURL(__filename).href:o&&o.tagName.toUpperCase()==="SCRIPT"&&o.src||new URL("main.js",document.baseURI).href));let t=null;async function u(){if(t=new n.BrowserWindow({width:1024,height:768,webPreferences:{preload:r.join(d,"preload.js"),contextIsolation:!0,nodeIntegration:!1},show:!1}),t.on("ready-to-show",()=>t==null?void 0:t.show()),n.app.isPackaged)await t.loadFile(r.join(process.cwd(),"electron/dist/index.html"));else{const e=process.env.VITE_DEV_SERVER_URL||"http://localhost:5173";await t.loadURL(e),t.webContents.openDevTools({mode:"detach"})}}n.app.on("window-all-closed",()=>{process.platform!=="darwin"&&n.app.quit()});n.app.whenReady().then(u);n.ipcMain.handle("dialog:openCSV",async()=>{const e=await n.dialog.showOpenDialog(t,{filters:[{name:"CSV Files",extensions:["csv"]}],properties:["openFile"]});return e.canceled||e.filePaths.length===0?null:e.filePaths[0]});n.ipcMain.handle("dialog:saveCSV",async()=>{const e=await n.dialog.showSaveDialog(t,{filters:[{name:"CSV Files",extensions:["csv"]}]});return e.canceled||!e.filePath?null:e.filePath});n.ipcMain.handle("fs:readFile",async(e,a,i="utf-8")=>await l.readFile(a,{encoding:i}));n.ipcMain.handle("fs:writeFile",async(e,a,i,s="utf-8")=>(await l.writeFile(a,i,{encoding:s}),!0));
